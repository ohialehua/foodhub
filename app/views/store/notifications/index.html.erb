<div class="container">
  <div class="row">
    <h2>未読通知一覧</h2>
    <div class="col-12 mt-5">
    <% if @notifications.exists? %>
      <table class="table table-dark">
      <% @notifications.each do |notification| %>
        <tr>
        <% case notification.action %>
          <% when 'order' then %>
            <td><%= notification.created_at.strftime('%Y/%m/%d') %></td>
            <td>
            <% if current_store.marked_by?(notification.enduser) %>
              <%=link_to notification.enduser.name, store_marker_path(current_store.markers.find_by(enduser_id: notification.enduser.id)) %>
              <!--フォロワーなら注文履歴一覧ページにとぶlink-->
            <% else %>
              <%= notification.enduser.name %>
            <% end %>
              さんから<%= link_to '注文', store_store_order_path(notification.store_order) %>がありました
            </td>
          <% when 'like' then %>
            <td><%= notification.created_at.strftime('%Y/%m/%d') %></td>
            <td>
            <% if current_store.marked_by?(notification.enduser) %>
              <%=link_to notification.enduser.name, store_marker_path(current_store.markers.find_by(enduser_id: notification.enduser.id)) %>
            <% else %>
              <%= notification.enduser.name %>
            <% end %>
              さんが<%= link_to 'あなたの投稿', store_post_path(notification.post) %>にいいねしました
            </td>
          <% when 'comment' then %>
            <td><%= notification.created_at.strftime('%Y/%m/%d') %></td>
            <td>
            <% if current_store.marked_by?(notification.enduser) %>
              <%=link_to notification.enduser.name, store_marker_path(current_store.markers.find_by(enduser_id: notification.enduser.id)) %>
            <% else %>
              <%= notification.enduser.name %>
            <% end %>
              さんが<%= link_to 'あなたの投稿', store_post_path(notification.post) %>にコメントしました
            </td>
          <% when 'mark' then %>
            <td><%= notification.created_at.strftime('%Y/%m/%d') %></td>
            <td><%=link_to notification.enduser.name, store_marker_path(current_store.markers.find_by(enduser_id: notification.enduser.id)) %>さんがあなたをお気に入り登録しました</td>
        <% end %>
        </tr>
      <% end %>
      </table>
    <% else %>
      <h4>通知はありません</h4>
    <% end %>
    </div>
  </div>
</div>